\subsection{PS-PL Communication} \label{ssec:ps_pl}
Communication between the Programmable Logic (PL) and Programmable Software (PS) was implemented so that data was able to traverse between the ARM processor and the FPGA fabric on the SoC. This process was configured in Vivado with the use of an Advanced eXtensible Interface (AXI) bus.

\subsubsection{Advanced eXtensible Interface (AXI)}
AXI is a type of on-chip interconnect specification intended for transaction based master-to-slave memory mapped operations, which made it perfect for PS-PL communication. These AXI busses are integrally involved in most Xilinx IP cores and contain many signals and control flags. Instead of attempting to interface with AXI by creating the signals, a custom IP AXI Peripheral can be created that abstracts away the complications of AXI communication.

\subsubsection{Creating Custom IP} \label{sssec:creatingCustomIP}
For this project, a custom IP module was created to serve as an AXI Peripheral. As an AXI Peripheral, this IP block was able to communicate with any other Xilinx IP blocks that use AXI. For the purpose of this project, the custom IP block communicates with the Zynq7 Processing System via its AXI bus. The custom IP was created in Vivado under Tools $\rightarrow$ Create and Package IP. The IP was set up as an AXI Peripheral, with four 32-bit wide memory registers attached to the AXI bus.
\par
With the bare IP AXI peripheral created, the custom IP's auto-generated files were edited to allow for the design's custom logic to be used in the AXI bus. In the auto-generated file instantiated in the top module, several lines of code were edited in order to connect the AXI peripheral's input and output channels to user logic. The IP was customized for the use of four memory registers, but only two were used: one for writing data to the PS, and the other for reading from the PS. 
\par
To write to the PS, the AXI output register data was wired to a register in the custom logic that held the desired data. This is done in the AXI read address $case$ statement that decodes addresses for reading registers. This can be seen on line 368 of our edited auto-generated custom IP code, shown in Appendix \ref{customIPaxi}. In the PS, a Xilinx built-in function was used to read the data from the AXI output register, shown on line 130 of the programmable software in Appendix \ref{ps_code}.
\par
To read from the PS, the data stored in the AXI's input register was wired to a register in the custom logic. This is done in the AXI write address $case$ statement on line 239 of our edited auto-generated custom IP code, shown in Appendix \ref{customIPaxi}. In the PS, a pointer to the memory address of the AXI input register was read from to obtain the data from the custom logic, as seen on line 198 of the programmable software in Appendix \ref{ps_code}.
\par
In addition, other necessary I/O ports from the custom logic were created in the custom IP's top module. Our custom IP top module is found in Appendix \ref{customIPtop}. Advanced user logic was also implemented within the IP core through modular instantiation.
\par
Once the rangefinder's implementation into the system was complete, the digital compass was interfaced to in order to rotate the rangefinder's data according to the sensor suite's compass heading.
